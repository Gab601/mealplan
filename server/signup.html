<html>
  <head>
  <title>Mealplan Signup</title>
  <style>
table {
  border-collapse: collapse;
}
th {
  padding: 4px 8px;
  width: 20em;
}
td {
  padding: 8;
  border: 1px solid black;
  text-align: center;
}
h2 {
  margin:0.5em;
  text-align:center;
}
.note {
  font-size: 1.5em;
  font-style: italic;
}
.week {
  padding: 1em;
}
.week:nth-child(even) {
  background-color: #eeeeee;
}
.usual {
  text-decoration: line-through;
}
  </style>
  </head>
  <body>
    <h1>pika mealplan</h1>
    <p class="note">NOTE: If you'd like to change your assignment or have swapped with someone, please email <a href="mailto:yfnkm@mit.edu">yfnkm@mit.edu</a> </p>
    {{if .Authorized}}
      <p style="font-style: italic;">Hi, {{.Username}}</p>
    {{else}}
      <p style="font-style: italic;">(Log in with a certificate if you want to claim a slot)</p>
    {{end}}
    <form action="/claim" method="POST">
    {{range $week, $days := .Weeks}}
      <div class="week">
        <table>
          <tr>
            <th></th>
            {{range $days}}
            <th>{{index $.DayNames .}}</th>
            {{end}}
          </tr>
          {{range $duty := $.Duties}}
          <tr>
            <th>{{$duty}}</th>
            {{range $dayindex := $days}}
              <td>
              {{$assignee := (index (index $.Assignments $duty) $dayindex)}}
              {{if $assignee}}
                {{if ne $assignee "_"}}
                <button disabled>{{$assignee}}</button>
                {{end}}
              {{else if $.Authorized}}
              <button name="claim/{{$duty}}/{{$dayindex}}">Claim!</button>
              {{end}}
              </td>
            {{end}}
          </tr>
          {{end}}
          </tr>
        </table>
      </div>
    {{end}}
    </form>
  </body>
</html>
